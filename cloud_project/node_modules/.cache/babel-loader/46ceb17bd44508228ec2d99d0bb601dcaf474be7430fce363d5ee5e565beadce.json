{"ast":null,"code":"// src/index.ts\nvar hasSetup = false;\nvar modality = null;\nvar hasEventBeforeFocus = false;\nvar hasBlurredWindowRecently = false;\nvar handlers = /* @__PURE__ */new Set();\nfunction trigger(modality2, event) {\n  handlers.forEach(handler => handler(modality2, event));\n}\nvar isMac = typeof window !== \"undefined\" && window.navigator != null ? /^Mac/.test(window.navigator.platform) : false;\nfunction isValidKey(e) {\n  return !(e.metaKey || !isMac && e.altKey || e.ctrlKey || e.key === \"Control\" || e.key === \"Shift\" || e.key === \"Meta\");\n}\nfunction onKeyboardEvent(event) {\n  hasEventBeforeFocus = true;\n  if (isValidKey(event)) {\n    modality = \"keyboard\";\n    trigger(\"keyboard\", event);\n  }\n}\nfunction onPointerEvent(event) {\n  modality = \"pointer\";\n  if (event.type === \"mousedown\" || event.type === \"pointerdown\") {\n    hasEventBeforeFocus = true;\n    const target = event.composedPath ? event.composedPath()[0] : event.target;\n    let matches = false;\n    try {\n      matches = target.matches(\":focus-visible\");\n    } catch {}\n    if (matches) return;\n    trigger(\"pointer\", event);\n  }\n}\nfunction isVirtualClick(event) {\n  if (event.mozInputSource === 0 && event.isTrusted) return true;\n  return event.detail === 0 && !event.pointerType;\n}\nfunction onClickEvent(e) {\n  if (isVirtualClick(e)) {\n    hasEventBeforeFocus = true;\n    modality = \"virtual\";\n  }\n}\nfunction onWindowFocus(event) {\n  if (event.target === window || event.target === document) {\n    return;\n  }\n  if (!hasEventBeforeFocus && !hasBlurredWindowRecently) {\n    modality = \"virtual\";\n    trigger(\"virtual\", event);\n  }\n  hasEventBeforeFocus = false;\n  hasBlurredWindowRecently = false;\n}\nfunction onWindowBlur() {\n  hasEventBeforeFocus = false;\n  hasBlurredWindowRecently = true;\n}\nfunction isFocusVisible() {\n  return modality !== \"pointer\";\n}\nfunction setupGlobalFocusEvents() {\n  if (typeof window === \"undefined\" || hasSetup) {\n    return;\n  }\n  const {\n    focus\n  } = HTMLElement.prototype;\n  HTMLElement.prototype.focus = function focusElement() {\n    hasEventBeforeFocus = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    focus.apply(this, args);\n  };\n  document.addEventListener(\"keydown\", onKeyboardEvent, true);\n  document.addEventListener(\"keyup\", onKeyboardEvent, true);\n  document.addEventListener(\"click\", onClickEvent, true);\n  window.addEventListener(\"focus\", onWindowFocus, true);\n  window.addEventListener(\"blur\", onWindowBlur, false);\n  if (typeof PointerEvent !== \"undefined\") {\n    document.addEventListener(\"pointerdown\", onPointerEvent, true);\n    document.addEventListener(\"pointermove\", onPointerEvent, true);\n    document.addEventListener(\"pointerup\", onPointerEvent, true);\n  } else {\n    document.addEventListener(\"mousedown\", onPointerEvent, true);\n    document.addEventListener(\"mousemove\", onPointerEvent, true);\n    document.addEventListener(\"mouseup\", onPointerEvent, true);\n  }\n  hasSetup = true;\n}\nfunction trackFocusVisible(fn) {\n  setupGlobalFocusEvents();\n  fn(isFocusVisible());\n  const handler = () => fn(isFocusVisible());\n  handlers.add(handler);\n  return () => {\n    handlers.delete(handler);\n  };\n}\nfunction trackInteractionModality(fn) {\n  setupGlobalFocusEvents();\n  fn(modality);\n  const handler = () => fn(modality);\n  handlers.add(handler);\n  return () => {\n    handlers.delete(handler);\n  };\n}\nfunction setInteractionModality(value) {\n  modality = value;\n  trigger(value, null);\n}\nfunction getInteractionModality() {\n  return modality;\n}\nexport { getInteractionModality, setInteractionModality, trackFocusVisible, trackInteractionModality };","map":{"version":3,"names":["hasSetup","modality","hasEventBeforeFocus","hasBlurredWindowRecently","handlers","Set","trigger","modality2","event","forEach","handler","isMac","window","navigator","test","platform","isValidKey","e","metaKey","altKey","ctrlKey","key","onKeyboardEvent","onPointerEvent","type","target","composedPath","matches","isVirtualClick","mozInputSource","isTrusted","detail","pointerType","onClickEvent","onWindowFocus","document","onWindowBlur","isFocusVisible","setupGlobalFocusEvents","focus","HTMLElement","prototype","focusElement","_len","arguments","length","args","Array","_key","apply","addEventListener","PointerEvent","trackFocusVisible","fn","add","delete","trackInteractionModality","setInteractionModality","value","getInteractionModality"],"sources":["/Users/harshkulkarni/Desktop/cloud_project/node_modules/@zag-js/focus-visible/dist/index.mjs"],"sourcesContent":["// src/index.ts\nvar hasSetup = false;\nvar modality = null;\nvar hasEventBeforeFocus = false;\nvar hasBlurredWindowRecently = false;\nvar handlers = /* @__PURE__ */ new Set();\nfunction trigger(modality2, event) {\n  handlers.forEach((handler) => handler(modality2, event));\n}\nvar isMac = typeof window !== \"undefined\" && window.navigator != null ? /^Mac/.test(window.navigator.platform) : false;\nfunction isValidKey(e) {\n  return !(e.metaKey || !isMac && e.altKey || e.ctrlKey || e.key === \"Control\" || e.key === \"Shift\" || e.key === \"Meta\");\n}\nfunction onKeyboardEvent(event) {\n  hasEventBeforeFocus = true;\n  if (isValidKey(event)) {\n    modality = \"keyboard\";\n    trigger(\"keyboard\", event);\n  }\n}\nfunction onPointerEvent(event) {\n  modality = \"pointer\";\n  if (event.type === \"mousedown\" || event.type === \"pointerdown\") {\n    hasEventBeforeFocus = true;\n    const target = event.composedPath ? event.composedPath()[0] : event.target;\n    let matches = false;\n    try {\n      matches = target.matches(\":focus-visible\");\n    } catch {\n    }\n    if (matches)\n      return;\n    trigger(\"pointer\", event);\n  }\n}\nfunction isVirtualClick(event) {\n  if (event.mozInputSource === 0 && event.isTrusted)\n    return true;\n  return event.detail === 0 && !event.pointerType;\n}\nfunction onClickEvent(e) {\n  if (isVirtualClick(e)) {\n    hasEventBeforeFocus = true;\n    modality = \"virtual\";\n  }\n}\nfunction onWindowFocus(event) {\n  if (event.target === window || event.target === document) {\n    return;\n  }\n  if (!hasEventBeforeFocus && !hasBlurredWindowRecently) {\n    modality = \"virtual\";\n    trigger(\"virtual\", event);\n  }\n  hasEventBeforeFocus = false;\n  hasBlurredWindowRecently = false;\n}\nfunction onWindowBlur() {\n  hasEventBeforeFocus = false;\n  hasBlurredWindowRecently = true;\n}\nfunction isFocusVisible() {\n  return modality !== \"pointer\";\n}\nfunction setupGlobalFocusEvents() {\n  if (typeof window === \"undefined\" || hasSetup) {\n    return;\n  }\n  const { focus } = HTMLElement.prototype;\n  HTMLElement.prototype.focus = function focusElement(...args) {\n    hasEventBeforeFocus = true;\n    focus.apply(this, args);\n  };\n  document.addEventListener(\"keydown\", onKeyboardEvent, true);\n  document.addEventListener(\"keyup\", onKeyboardEvent, true);\n  document.addEventListener(\"click\", onClickEvent, true);\n  window.addEventListener(\"focus\", onWindowFocus, true);\n  window.addEventListener(\"blur\", onWindowBlur, false);\n  if (typeof PointerEvent !== \"undefined\") {\n    document.addEventListener(\"pointerdown\", onPointerEvent, true);\n    document.addEventListener(\"pointermove\", onPointerEvent, true);\n    document.addEventListener(\"pointerup\", onPointerEvent, true);\n  } else {\n    document.addEventListener(\"mousedown\", onPointerEvent, true);\n    document.addEventListener(\"mousemove\", onPointerEvent, true);\n    document.addEventListener(\"mouseup\", onPointerEvent, true);\n  }\n  hasSetup = true;\n}\nfunction trackFocusVisible(fn) {\n  setupGlobalFocusEvents();\n  fn(isFocusVisible());\n  const handler = () => fn(isFocusVisible());\n  handlers.add(handler);\n  return () => {\n    handlers.delete(handler);\n  };\n}\nfunction trackInteractionModality(fn) {\n  setupGlobalFocusEvents();\n  fn(modality);\n  const handler = () => fn(modality);\n  handlers.add(handler);\n  return () => {\n    handlers.delete(handler);\n  };\n}\nfunction setInteractionModality(value) {\n  modality = value;\n  trigger(value, null);\n}\nfunction getInteractionModality() {\n  return modality;\n}\nexport {\n  getInteractionModality,\n  setInteractionModality,\n  trackFocusVisible,\n  trackInteractionModality\n};\n"],"mappings":"AAAA;AACA,IAAIA,QAAQ,GAAG,KAAK;AACpB,IAAIC,QAAQ,GAAG,IAAI;AACnB,IAAIC,mBAAmB,GAAG,KAAK;AAC/B,IAAIC,wBAAwB,GAAG,KAAK;AACpC,IAAIC,QAAQ,GAAG,eAAgB,IAAIC,GAAG,EAAE;AACxC,SAASC,OAAOA,CAACC,SAAS,EAAEC,KAAK,EAAE;EACjCJ,QAAQ,CAACK,OAAO,CAAEC,OAAO,IAAKA,OAAO,CAACH,SAAS,EAAEC,KAAK,CAAC,CAAC;AAC1D;AACA,IAAIG,KAAK,GAAG,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,SAAS,IAAI,IAAI,GAAG,MAAM,CAACC,IAAI,CAACF,MAAM,CAACC,SAAS,CAACE,QAAQ,CAAC,GAAG,KAAK;AACtH,SAASC,UAAUA,CAACC,CAAC,EAAE;EACrB,OAAO,EAAEA,CAAC,CAACC,OAAO,IAAI,CAACP,KAAK,IAAIM,CAAC,CAACE,MAAM,IAAIF,CAAC,CAACG,OAAO,IAAIH,CAAC,CAACI,GAAG,KAAK,SAAS,IAAIJ,CAAC,CAACI,GAAG,KAAK,OAAO,IAAIJ,CAAC,CAACI,GAAG,KAAK,MAAM,CAAC;AACxH;AACA,SAASC,eAAeA,CAACd,KAAK,EAAE;EAC9BN,mBAAmB,GAAG,IAAI;EAC1B,IAAIc,UAAU,CAACR,KAAK,CAAC,EAAE;IACrBP,QAAQ,GAAG,UAAU;IACrBK,OAAO,CAAC,UAAU,EAAEE,KAAK,CAAC;EAC5B;AACF;AACA,SAASe,cAAcA,CAACf,KAAK,EAAE;EAC7BP,QAAQ,GAAG,SAAS;EACpB,IAAIO,KAAK,CAACgB,IAAI,KAAK,WAAW,IAAIhB,KAAK,CAACgB,IAAI,KAAK,aAAa,EAAE;IAC9DtB,mBAAmB,GAAG,IAAI;IAC1B,MAAMuB,MAAM,GAAGjB,KAAK,CAACkB,YAAY,GAAGlB,KAAK,CAACkB,YAAY,EAAE,CAAC,CAAC,CAAC,GAAGlB,KAAK,CAACiB,MAAM;IAC1E,IAAIE,OAAO,GAAG,KAAK;IACnB,IAAI;MACFA,OAAO,GAAGF,MAAM,CAACE,OAAO,CAAC,gBAAgB,CAAC;IAC5C,CAAC,CAAC,MAAM,CACR;IACA,IAAIA,OAAO,EACT;IACFrB,OAAO,CAAC,SAAS,EAAEE,KAAK,CAAC;EAC3B;AACF;AACA,SAASoB,cAAcA,CAACpB,KAAK,EAAE;EAC7B,IAAIA,KAAK,CAACqB,cAAc,KAAK,CAAC,IAAIrB,KAAK,CAACsB,SAAS,EAC/C,OAAO,IAAI;EACb,OAAOtB,KAAK,CAACuB,MAAM,KAAK,CAAC,IAAI,CAACvB,KAAK,CAACwB,WAAW;AACjD;AACA,SAASC,YAAYA,CAAChB,CAAC,EAAE;EACvB,IAAIW,cAAc,CAACX,CAAC,CAAC,EAAE;IACrBf,mBAAmB,GAAG,IAAI;IAC1BD,QAAQ,GAAG,SAAS;EACtB;AACF;AACA,SAASiC,aAAaA,CAAC1B,KAAK,EAAE;EAC5B,IAAIA,KAAK,CAACiB,MAAM,KAAKb,MAAM,IAAIJ,KAAK,CAACiB,MAAM,KAAKU,QAAQ,EAAE;IACxD;EACF;EACA,IAAI,CAACjC,mBAAmB,IAAI,CAACC,wBAAwB,EAAE;IACrDF,QAAQ,GAAG,SAAS;IACpBK,OAAO,CAAC,SAAS,EAAEE,KAAK,CAAC;EAC3B;EACAN,mBAAmB,GAAG,KAAK;EAC3BC,wBAAwB,GAAG,KAAK;AAClC;AACA,SAASiC,YAAYA,CAAA,EAAG;EACtBlC,mBAAmB,GAAG,KAAK;EAC3BC,wBAAwB,GAAG,IAAI;AACjC;AACA,SAASkC,cAAcA,CAAA,EAAG;EACxB,OAAOpC,QAAQ,KAAK,SAAS;AAC/B;AACA,SAASqC,sBAAsBA,CAAA,EAAG;EAChC,IAAI,OAAO1B,MAAM,KAAK,WAAW,IAAIZ,QAAQ,EAAE;IAC7C;EACF;EACA,MAAM;IAAEuC;EAAM,CAAC,GAAGC,WAAW,CAACC,SAAS;EACvCD,WAAW,CAACC,SAAS,CAACF,KAAK,GAAG,SAASG,YAAYA,CAAA,EAAU;IAC3DxC,mBAAmB,GAAG,IAAI;IAAC,SAAAyC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAD0BC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAEzDT,KAAK,CAACU,KAAK,CAAC,IAAI,EAAEH,IAAI,CAAC;EACzB,CAAC;EACDX,QAAQ,CAACe,gBAAgB,CAAC,SAAS,EAAE5B,eAAe,EAAE,IAAI,CAAC;EAC3Da,QAAQ,CAACe,gBAAgB,CAAC,OAAO,EAAE5B,eAAe,EAAE,IAAI,CAAC;EACzDa,QAAQ,CAACe,gBAAgB,CAAC,OAAO,EAAEjB,YAAY,EAAE,IAAI,CAAC;EACtDrB,MAAM,CAACsC,gBAAgB,CAAC,OAAO,EAAEhB,aAAa,EAAE,IAAI,CAAC;EACrDtB,MAAM,CAACsC,gBAAgB,CAAC,MAAM,EAAEd,YAAY,EAAE,KAAK,CAAC;EACpD,IAAI,OAAOe,YAAY,KAAK,WAAW,EAAE;IACvChB,QAAQ,CAACe,gBAAgB,CAAC,aAAa,EAAE3B,cAAc,EAAE,IAAI,CAAC;IAC9DY,QAAQ,CAACe,gBAAgB,CAAC,aAAa,EAAE3B,cAAc,EAAE,IAAI,CAAC;IAC9DY,QAAQ,CAACe,gBAAgB,CAAC,WAAW,EAAE3B,cAAc,EAAE,IAAI,CAAC;EAC9D,CAAC,MAAM;IACLY,QAAQ,CAACe,gBAAgB,CAAC,WAAW,EAAE3B,cAAc,EAAE,IAAI,CAAC;IAC5DY,QAAQ,CAACe,gBAAgB,CAAC,WAAW,EAAE3B,cAAc,EAAE,IAAI,CAAC;IAC5DY,QAAQ,CAACe,gBAAgB,CAAC,SAAS,EAAE3B,cAAc,EAAE,IAAI,CAAC;EAC5D;EACAvB,QAAQ,GAAG,IAAI;AACjB;AACA,SAASoD,iBAAiBA,CAACC,EAAE,EAAE;EAC7Bf,sBAAsB,EAAE;EACxBe,EAAE,CAAChB,cAAc,EAAE,CAAC;EACpB,MAAM3B,OAAO,GAAGA,CAAA,KAAM2C,EAAE,CAAChB,cAAc,EAAE,CAAC;EAC1CjC,QAAQ,CAACkD,GAAG,CAAC5C,OAAO,CAAC;EACrB,OAAO,MAAM;IACXN,QAAQ,CAACmD,MAAM,CAAC7C,OAAO,CAAC;EAC1B,CAAC;AACH;AACA,SAAS8C,wBAAwBA,CAACH,EAAE,EAAE;EACpCf,sBAAsB,EAAE;EACxBe,EAAE,CAACpD,QAAQ,CAAC;EACZ,MAAMS,OAAO,GAAGA,CAAA,KAAM2C,EAAE,CAACpD,QAAQ,CAAC;EAClCG,QAAQ,CAACkD,GAAG,CAAC5C,OAAO,CAAC;EACrB,OAAO,MAAM;IACXN,QAAQ,CAACmD,MAAM,CAAC7C,OAAO,CAAC;EAC1B,CAAC;AACH;AACA,SAAS+C,sBAAsBA,CAACC,KAAK,EAAE;EACrCzD,QAAQ,GAAGyD,KAAK;EAChBpD,OAAO,CAACoD,KAAK,EAAE,IAAI,CAAC;AACtB;AACA,SAASC,sBAAsBA,CAAA,EAAG;EAChC,OAAO1D,QAAQ;AACjB;AACA,SACE0D,sBAAsB,EACtBF,sBAAsB,EACtBL,iBAAiB,EACjBI,wBAAwB"},"metadata":{},"sourceType":"module","externalDependencies":[]}